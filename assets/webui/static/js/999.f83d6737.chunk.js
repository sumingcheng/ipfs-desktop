(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[999],{44923:e=>{"use strict";e.exports=function(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&n.cancel(),n.releaseLock()}}()}catch(t){return Promise.reject(t)}}},38758:e=>{function t(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)t&&t.removeEventListener&&t.removeEventListener("abort",n)}for(const r of e)if(r&&r.addEventListener){if(r.aborted){n();break}r.addEventListener("abort",n)}return t.signal}e.exports=t,e.exports.anySignal=t},67911:(e,t,n)=>{"use strict";var r=n(62285);const s=n(4053),o="object"===typeof window&&"object"===typeof document&&9===document.nodeType,a=s(),i=o&&!a,c=a&&!o,l=a&&o,u="undefined"!==typeof r&&"undefined"!==typeof r.release&&"node"===r.release.name&&!a,h="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,d="undefined"!==typeof r&&!1,f="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:d,isElectron:a,isElectronMain:c,isElectronRenderer:l,isNode:u,isBrowser:i,isWebWorker:h,isEnvWithDom:o,isReactNative:f}},85354:(e,t,n)=>{"use strict";e.exports=n(72219)},38975:(e,t,n)=>{"use strict";const r=n(94802);async function*s(e,t){const n=new r,s=await n.get(e,t);yield*s.iterator()}e.exports=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:s(e,t)})},94802:(e,t,n)=>{"use strict";const{fetch:r,Request:s,Headers:o}=n(33551),{TimeoutError:a,HTTPError:i}=n(99555),c=n(8355).bind({ignoreUndefined:!0}),{URL:l,URLSearchParams:u}=n(11505),h=n(38758),d=n(44923),{isBrowser:f,isWebWorker:p}=n(67911),g=n(2135),y={throwHttpErrors:!0,credentials:"same-origin"};class m{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=c(y,e)}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=c(this.opts,t),y=new o(n.headers);if("string"!==typeof e&&!(e instanceof l||e instanceof s))throw new TypeError("`resource` must be a string, URL, or Request");const m=new l(e.toString(),n.base),{searchParams:v,transformSearchParams:E,json:P}=n;v&&(m.search="function"===typeof E?E(new u(n.searchParams)):new u(n.searchParams)),P&&(n.body=JSON.stringify(n.json),y.set("content-type","application/json"));const S=new AbortController,T=h([S.signal,n.signal]);null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(f||p)&&(n.body=new Blob(await g(d(n.body))));const j=await((e,t,n)=>{if(void 0===t)return e;const r=Date.now(),s=()=>Date.now()-r>=t;return new Promise(((r,o)=>{const i=setTimeout((()=>{s()&&(o(new a),n.abort())}),t),c=e=>t=>{clearTimeout(i),s()?o(new a):e(t)};e.then(c(r),c(o))}))})(r(m.toString(),{...n,signal:T,timeout:void 0,headers:y,duplex:"half"}),n.timeout,S);if(!j.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(j),new i(j);return j.iterator=async function*(){yield*b(j.body)},j.ndjson=async function*(){for await(const e of w(j.iterator()))t.transform?yield t.transform(e):yield e},j}post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"POST"})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"GET"})}put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"PUT"})}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"DELETE"})}options(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"OPTIONS"})}}const w=async function*(e){const t=new TextDecoder;let n="";for await(const r of e){n+=t.decode(r,{stream:!0});const e=n.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const n=e[t].trim();n.length>0&&(yield JSON.parse(n))}n=e[e.length-1]}n+=t.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))},b=e=>{if(v(e))return e;if(P(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:n=>(e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:n}))})}}if(E(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:e,value:n}=await t.read();if(e)return;n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},v=e=>"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator],E=e=>e&&"function"===typeof e.getReader,P=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");m.HTTPError=i,m.TimeoutError=a,m.streamToAsyncIterator=b,m.post=(e,t)=>new m(t).post(e,t),m.get=(e,t)=>new m(t).get(e,t),m.put=(e,t)=>new m(t).put(e,t),m.delete=(e,t)=>new m(t).delete(e,t),m.options=(e,t)=>new m(t).options(e,t),e.exports=m},99555:(e,t)=>{"use strict";class n extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out"),this.name="TimeoutError"}}t.TimeoutError=n;class r extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted."),this.name="AbortError"}}t.AbortError=r;class s extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}t.HTTPError=s},33551:(e,t,n)=>{"use strict";const{TimeoutError:r,AbortError:s}=n(99555),{Response:o,Request:a,Headers:i,default:c}=n(85354),l=c,u=e=>{const t=new i;for(const n of e.trim().split(/[\r\n]+/)){const e=n.indexOf(": ");e>0&&t.set(n.slice(0,e),n.slice(e+1))}return t};class h extends o{constructor(e,t,n){super(t,n),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new XMLHttpRequest;n.open(t.method||"GET",e.toString(),!0);const{timeout:a,headers:c}=t;if(a&&a>0&&a<1/0&&(n.timeout=a),null!=t.overrideMimeType&&n.overrideMimeType(t.overrideMimeType),c)for(const[r,s]of new i(c))n.setRequestHeader(r,s);return t.signal&&(t.signal.onabort=()=>n.abort()),t.onUploadProgress&&(n.upload.onprogress=t.onUploadProgress),n.responseType="arraybuffer",new Promise(((e,a)=>{const i=t=>{switch(t.type){case"error":e(o.error());break;case"load":e(new h(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:u(n.getAllResponseHeaders())}));break;case"timeout":a(new r);break;case"abort":a(new s)}};n.onerror=i,n.onload=i,n.ontimeout=i,n.onabort=i,n.send(t.body)}))}(e,t):l(e,t)},Request:a,Headers:i}},9776:(e,t,n)=>{"use strict";e.exports=n(33100)},33100:(e,t,n)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(55235),r.BufferWriter=n(48268),r.Reader=n(34787),r.BufferReader=n(44748),r.util=n(35728),r.rpc=n(76185),r.roots=n(27139),r.configure=s,s()},34787:(e,t,n)=>{"use strict";e.exports=c;var r,s=n(35728),o=s.LongBits,a=s.utf8;function i(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return s.Buffer?function(e){return(c.create=function(e){return s.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw i(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw i(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw i(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw i(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,n);if(t===n){var r=s.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw i(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw i(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=u(),r._configure();var t=s.Long?"toLong":"toNumber";s.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},44748:(e,t,n)=>{"use strict";e.exports=o;var r=n(34787);(o.prototype=Object.create(r.prototype)).constructor=o;var s=n(35728);function o(e){r.call(this,e)}o._configure=function(){s.Buffer&&(o.prototype._slice=s.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},27139:e=>{"use strict";e.exports={}},76185:(e,t,n)=>{"use strict";t.Service=n(62897)},62897:(e,t,n)=>{"use strict";e.exports=s;var r=n(35728);function s(e,t,n){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,n,s,o,a){if(!o)throw TypeError("request must be specified");var i=this;if(!a)return r.asPromise(e,i,t,n,s,o);if(i.rpcImpl)try{return i.rpcImpl(t,n[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return i.emit("error",e,t),a(e);if(null!==n){if(!(n instanceof s))try{n=s[i.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return i.emit("error",e,t),a(e)}return i.emit("data",n,t),a(null,n)}i.end(!0)}))}catch(c){return i.emit("error",c,t),void setTimeout((function(){a(c)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},29305:(e,t,n)=>{"use strict";e.exports=s;var r=n(35728);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=s.zero=new s(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new s(n,r)},s.from=function(e){if("number"===typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):o},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var i=String.prototype.charCodeAt;s.fromHash=function(e){return e===a?o:new s((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},35728:function(e,t,n){"use strict";var r=t;function s(e,t,n){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&n||(e[r[s]]=t[r[s]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&s(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}r.asPromise=n(94762),r.base64=n(96762),r.EventEmitter=n(77351),r.float=n(80217),r.inquire=n(84882),r.utf8=n(38626),r.pool=n(56931),r.LongBits=n(29305),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"===typeof e||e instanceof String},r.isObject=function(e){return e&&"object"===typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"===typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},55235:(e,t,n)=>{"use strict";e.exports=h;var r,s=n(35728),o=s.LongBits,a=s.base64,i=s.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return s.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function f(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function y(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}h.create=d(),h.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(h.alloc=s.pool(h.alloc,s.Array.prototype.subarray)),h.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=o.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var m=s.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(s.isString(e)){var n=h.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},h.prototype.string=function(e){var t=i.length(e);return t?this.uint32(t)._push(i.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},h._configure=function(e){r=e,h.create=d(),r._configure()}},48268:(e,t,n)=>{"use strict";e.exports=o;var r=n(55235);(o.prototype=Object.create(r.prototype)).constructor=o;var s=n(35728);function o(){r.call(this)}function a(e,t,n){e.length<40?s.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=s._Buffer_allocUnsafe,o.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()},39999:(e,t,n)=>{"use strict";n.d(t,{create:()=>Ta});var r={};n.r(r),n.d(r,{identity:()=>Q});var s={};n.r(s),n.d(s,{identity:()=>le});var o={};n.r(o),n.d(o,{base2:()=>ue});var a={};n.r(a),n.d(a,{base8:()=>he});var i={};n.r(i),n.d(i,{base10:()=>de});var c={};n.r(c),n.d(c,{base16:()=>fe,base16upper:()=>pe});var l={};n.r(l),n.d(l,{base32:()=>ge,base32hex:()=>be,base32hexpad:()=>Ee,base32hexpadupper:()=>Pe,base32hexupper:()=>ve,base32pad:()=>me,base32padupper:()=>we,base32upper:()=>ye,base32z:()=>Se});var u={};n.r(u),n.d(u,{base36:()=>Te,base36upper:()=>je});var h={};n.r(h),n.d(h,{base58btc:()=>Ae,base58flickr:()=>xe});var d={};n.r(d),n.d(d,{base64:()=>Ne,base64pad:()=>ke,base64url:()=>Be,base64urlpad:()=>Ue});var f={};n.r(f),n.d(f,{base256emoji:()=>Oe});var p={};n.r(p),n.d(p,{sha256:()=>ze,sha512:()=>Me});var g={};n.r(g),n.d(g,{code:()=>qe,decode:()=>Ve,encode:()=>Fe,name:()=>He});var y={};n.r(y),n.d(y,{code:()=>Je,decode:()=>Ze,encode:()=>Xe,name:()=>$e});const m=e=>Promise.reject(new Error('No base found for "'.concat(e,'"')));class w{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||m;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error('Codec already exists for codec "'.concat(e.name,'"'));this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const b=e=>Promise.reject(new Error('No codec found for "'.concat(e,'"')));class v{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||b;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const n=await this._loadCodec(e);return null==t[e]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const E=e=>Promise.reject(new Error('No hasher found for "'.concat(e,'"')));class P{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||E;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error('Resolver already exists for codec "'.concat(e.name,'"'));this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const n=await this._loadHasher(e);return null==t[e]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}var S=n(76179),T=n(73910),j=n(98079),A=n(23283);new Uint8Array(0);const x=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var N=function e(t,n,r){n=n||[];var s=r=r||0;for(;t>=U;)n[r++]=255&t|k,t/=128;for(;t&B;)n[r++]=255&t|k,t>>>=7;return n[r]=0|t,e.bytes=r-s+1,n},k=128,B=-128,U=Math.pow(2,31);var C=function e(t,n){var r,s=0,o=0,a=n=n||0,i=t.length;do{if(a>=i)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],s+=o<28?(r&R)<<o:(r&R)*Math.pow(2,o),o+=7}while(r>=I);return e.bytes=a-n,s},I=128,R=127;var O=Math.pow(2,7),_=Math.pow(2,14),D=Math.pow(2,21),L=Math.pow(2,28),z=Math.pow(2,35),M=Math.pow(2,42),H=Math.pow(2,49),q=Math.pow(2,56),F=Math.pow(2,63);const V={encode:N,decode:C,encodingLength:function(e){return e<O?1:e<_?2:e<D?3:e<L?4:e<z?5:e<M?6:e<H?7:e<q?8:e<F?9:10}},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[V.decode(e,t),V.decode.bytes]},K=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return V.encode(e,t,n),t},$=e=>V.encodingLength(e),J=(e,t)=>{const n=t.byteLength,r=$(e),s=r+$(n),o=new Uint8Array(s+n);return K(e,o,0),K(n,o,r),o.set(t,s),new Z(e,n,t,o)},X=e=>{const t=x(e),[n,r]=W(t),[s,o]=W(t.subarray(r)),a=t.subarray(r+o);if(a.byteLength!==s)throw new Error("Incorrect length");return new Z(n,s,a,t)};class Z{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const G=x,Q={code:0,name:"identity",encode:G,digest:e=>J(0,G(e))};var Y=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),a=o.charCodeAt(0);if(255!==n[a])throw new TypeError(o+" is ambiguous");n[a]=s}var i=e.length,c=e.charAt(0),l=Math.log(i)/Math.log(256),u=Math.log(256)/Math.log(i);function h(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,s=0;e[t]===c;)r++,t++;for(var o=(e.length-t)*l+1>>>0,a=new Uint8Array(o);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=o-1;(0!==u||h<s)&&-1!==d;d--,h++)u+=i*a[d]>>>0,a[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");s=h,t++}if(" "!==e[t]){for(var f=o-s;f!==o&&0===a[f];)f++;for(var p=new Uint8Array(r+(o-f)),g=r;f!==o;)p[g++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,s=0,o=t.length;s!==o&&0===t[s];)s++,n++;for(var a=(o-s)*u+1>>>0,l=new Uint8Array(a);s!==o;){for(var h=t[s],d=0,f=a-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%i>>>0,h=h/i>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,s++}for(var p=a-r;p!==a&&0===l[p];)p++;for(var g=c.repeat(n);p<a;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:h,decode:function(e){var n=h(e);if(n)return n;throw new Error("Non-".concat(t," character"))}}};const ee=Y;class te{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class ne{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return se(this,e)}}class re{constructor(e){this.decoders=e}or(e){return se(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}const se=(e,t)=>new re({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class oe{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new te(e,t,n),this.decoder=new ne(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ae=e=>{let{name:t,prefix:n,encode:r,decode:s}=e;return new oe(t,n,r,s)},ie=e=>{let{prefix:t,name:n,alphabet:r}=e;const{encode:s,decode:o}=ee(r,n);return ae({prefix:t,name:n,encode:s,decode:e=>x(o(e))})},ce=e=>{let{name:t,prefix:n,bitsPerChar:r,alphabet:s}=e;return ae({prefix:n,name:t,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],s=(1<<n)-1;let o="",a=0,i=0;for(let c=0;c<e.length;++c)for(i=i<<8|e[c],a+=8;a>n;)a-=n,o+=t[s&i>>a];if(a&&(o+=t[s&i<<n-a]),r)for(;o.length*n&7;)o+="=";return o})(e,s,r),decode:e=>((e,t,n,r)=>{const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let o=e.length;for(;"="===e[o-1];)--o;const a=new Uint8Array(o*n/8|0);let i=0,c=0,l=0;for(let u=0;u<o;++u){const t=s[e[u]];if(void 0===t)throw new SyntaxError("Non-".concat(r," character"));c=c<<n|t,i+=n,i>=8&&(i-=8,a[l++]=255&c>>i)}if(i>=n||255&c<<8-i)throw new SyntaxError("Unexpected end of data");return a})(e,s,r,t)})},le=ae({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),ue=ce({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),he=ce({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),de=ie({prefix:"9",name:"base10",alphabet:"0123456789"}),fe=ce({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pe=ce({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ge=ce({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ye=ce({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),me=ce({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),we=ce({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),be=ce({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ve=ce({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ee=ce({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pe=ce({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Se=ce({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Te=ie({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),je=ie({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ae=ie({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xe=ie({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ne=ce({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ke=ce({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Be=ce({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ue=ce({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ce=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ie=Ce.reduce(((e,t,n)=>(e[n]=t,e)),[]),Re=Ce.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const Oe=ae({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Ie[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Re[n.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(n));t.push(e)}return new Uint8Array(t)}}),_e=e=>{let{name:t,code:n,encode:r}=e;return new De(t,n,r)};class De{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?J(this.code,t):t.then((e=>J(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Le=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ze=_e({name:"sha2-256",code:18,encode:Le("SHA-256")}),Me=_e({name:"sha2-512",code:19,encode:Le("SHA-512")}),He="raw",qe=85,Fe=e=>x(e),Ve=e=>x(e),We=new TextEncoder,Ke=new TextDecoder,$e="json",Je=512,Xe=e=>We.encode(JSON.stringify(e)),Ze=e=>JSON.parse(Ke.decode(e)),Ge=(e,t)=>{const{bytes:n,version:r}=e;return 0===r?nt(n,Ye(e),t||Ae.encoder):rt(n,Ye(e),t||ge.encoder)},Qe=new WeakMap,Ye=e=>{const t=Qe.get(e);if(null==t){const t=new Map;return Qe.set(e,t),t}return t};class et{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==st)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ot)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return et.createV0(t)}default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=J(e,t);return et.createV1(this.code,n)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}equals(e){return et.equals(this,e)}static equals(e,t){const n=t;return n&&e.code===n.code&&e.version===n.version&&((e,t)=>{if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,n.bytes)}})(e.multihash,n.multihash)}toString(e){return Ge(this,e)}toJSON(){return{"/":Ge(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID(".concat(this.toString(),")")}static asCID(e){if(null==e)return null;const t=e;if(t instanceof et)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:s}=t;return new et(e,n,r,s||at(e,n,r.bytes))}if(!0===t[it]){const{version:e,multihash:n,code:r}=t,s=X(n);return et.create(e,r,s)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==st)throw new Error("Version 0 CID must use dag-pb (code: ".concat(st,") block encoding"));return new et(e,t,n,n.bytes);case 1:{const r=at(e,t,n.bytes);return new et(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return et.create(0,st,e)}static createV1(e,t){return et.create(1,e,t)}static decode(e){const[t,n]=et.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=et.inspectBytes(e),n=t.size-t.multihashSize,r=x(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),o=new Z(t.multihashCode,t.digestSize,s,r);return[0===t.version?et.createV0(o):et.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=W(e.subarray(t));return t+=r,n};let r=n(),s=st;if(18===r?(r=0,t=0):s=n(),0!==r&&1!==r)throw new RangeError("Invalid CID version ".concat(r));const o=t,a=n(),i=n(),c=t+i;return{version:r,codec:s,multihashCode:a,digestSize:i,multihashSize:c-o,size:c}}static parse(e,t){const[n,r]=tt(e,t),s=et.decode(r);if(0===s.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Ye(s).set(n,e),s}}const tt=(e,t)=>{switch(e[0]){case"Q":{const n=t||Ae;return[Ae.prefix,n.decode("".concat(Ae.prefix).concat(e))]}case Ae.prefix:{const n=t||Ae;return[Ae.prefix,n.decode(e)]}case ge.prefix:{const n=t||ge;return[ge.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},nt=(e,t,n)=>{const{prefix:r}=n;if(r!==Ae.prefix)throw Error("Cannot string encode V0 in ".concat(n.name," encoding"));const s=t.get(r);if(null==s){const s=n.encode(e).slice(1);return t.set(r,s),s}return s},rt=(e,t,n)=>{const{prefix:r}=n,s=t.get(r);if(null==s){const s=n.encode(e);return t.set(r,s),s}return s},st=112,ot=18,at=(e,t,n)=>{const r=$(e),s=r+$(t),o=new Uint8Array(s+n.byteLength);return K(e,o,0),K(t,o,r),o.set(n,s),o},it=Symbol.for("@ipld/js-cid/CID"),ct={...s,...o,...a,...i,...c,...l,...u,...h,...d,...f},lt={...p,...r},ut={raw:g,json:y};var ht=n(64181),dt=n(67911);let ft=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function pt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms";var n=null;e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2");var r="-"===e[0];return e.replace(ft,(function(e,t,r){(r=gt(r))&&(n=(n||0)+Math.abs(parseFloat(t,10))*r)})),n&&n/(gt(t)||1)*(r?-1:1)}function gt(e){return pt[e]||pt[e.toLowerCase().replace(/s$/,"")]}pt.nanosecond=pt.ns=1e-6,pt["\xb5s"]=pt["\u03bcs"]=pt.us=pt.microsecond=.001,pt.millisecond=pt.ms=pt[""]=1,pt.second=pt.sec=pt.s=1e3*pt.ms,pt.minute=pt.min=pt.m=60*pt.s,pt.hour=pt.hr=pt.h=60*pt.m,pt.day=pt.d=24*pt.h,pt.week=pt.wk=pt.w=7*pt.d,pt.month=pt.b=30.4375*pt.d,pt.year=pt.yr=pt.y=365.25*pt.d;const yt=pt;var mt=n(76522),wt=n.n(mt);function bt(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}("".concat(e,":trace"));return wt().enabled("".concat(e,":trace"))&&null!=wt().names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=wt()("".concat(e,":trace"))),Object.assign(wt()(e),{error:wt()("".concat(e,":error")),trace:t})}wt().formatters.b=e=>null==e?"undefined":Ae.baseEncode(e),wt().formatters.t=e=>null==e?"undefined":ge.baseEncode(e),wt().formatters.m=e=>null==e?"undefined":Ne.baseEncode(e),wt().formatters.p=e=>null==e?"undefined":e.toString(),wt().formatters.c=e=>null==e?"undefined":e.toString(),wt().formatters.k=e=>null==e?"undefined":e.toString(),wt().formatters.a=e=>null==e?"undefined":e.toString();var vt=n(94802),Et=n.n(vt),Pt=n(16374),St=n(22976),Tt=n(79464);const jt=St.wM,At=St.w7,xt=function(e){let t=0;if(e=e.toString().trim(),jt(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(At(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){let e;jt(n[r])&&(e=xt(n[r]),n[r]=(0,Tt.d)(e.slice(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,(0,Tt.d)(e.slice(2,4),"base16"))}if(""===n[0])for(;n.length<8;)n.unshift("0");else if(""===n[n.length-1])for(;n.length<8;)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const s=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);s[t++]=e>>8&255,s[t++]=255&e}return s}throw new Error("invalid ip address")},Nt=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let s=0;s<n;s++)r.push(e[t+s]);return r.join(".")}if(16===n){const e=[];for(let s=0;s<n;s+=2)e.push(r.getUint16(t+s).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},kt=-1,Bt={},Ut={};function Ct(e){if("number"===typeof e){if(null!=Ut[e])return Ut[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=Bt[e])return Bt[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,kt,"ip6zone"],[43,8,"ipcidr"],[53,kt,"dns",!0],[54,kt,"dns4",!0],[55,kt,"dns6",!0],[56,kt,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,kt,"unix",!1,!0],[421,kt,"ipfs"],[421,kt,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,kt,"garlic64"],[448,0,"tls"],[449,kt,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,kt,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,kt,"memory"]].forEach((e=>{const t=function(e,t,n,r,s){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(s)}}(...e);Ut[t.code]=t,Bt[t.name]=t}));var It=n(21870),Rt=n.n(It),Ot=n(74047),_t=n(72401);function Dt(e,t){switch(Ct(e).code){case 4:case 41:return function(e){const t=Nt(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!St.ei(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Wt(t);case 6:case 273:case 33:case 132:return Ft(t).toString();case 421:return function(e){const t=Rt().decode(e),n=e.slice(Rt().decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return(0,Tt.d)(n,"base58btc")}(t);case 444:case 445:return Kt(t);case 466:return function(e){const t=Rt().decode(e),n=e.slice(Rt().decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return"u"+(0,Tt.d)(n,"base64url")}(t);default:return(0,Tt.d)(t,"base16")}}function Lt(e,t){switch(Ct(e).code){case 4:case 41:return Ht(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Vt(t);case 6:case 273:case 33:case 132:return qt(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?X(Ae.decode(`z${e}`)).bytes:et.parse(e).multihash.bytes;const n=Uint8Array.from(Rt().encode(t.length));return(0,_t.x)([n,t],n.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=ge.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const s=qt(r);return(0,_t.x)([n,s],n.length+s.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=ge.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const s=qt(r);return(0,_t.x)([n,s],n.length+s.length)}(t);case 466:return function(e){const t=Mt.decode(e),n=Uint8Array.from(Rt().encode(t.length));return(0,_t.x)([n,t],n.length+t.length)}(t);default:return(0,Ot.s)(t,"base16")}}const zt=Object.values(ct).map((e=>e.decoder)),Mt=function(){let e=zt[0].or(zt[1]);return zt.slice(2).forEach((t=>e=e.or(t))),e}();function Ht(e){if(!St.ei(e))throw new Error("invalid ip address");return xt(e)}function qt(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Ft(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Vt(e){const t=(0,Ot.s)(e),n=Uint8Array.from(Rt().encode(t.length));return(0,_t.x)([n,t],n.length+t.length)}function Wt(e){const t=Rt().decode(e);if((e=e.slice(Rt().decode.bytes)).length!==t)throw new Error("inconsistent lengths");return(0,Tt.d)(e)}function Kt(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2);return`${(0,Tt.d)(t,"base32")}:${Ft(n)}`}function $t(e){return e.map((e=>{const t=rn(e);return null!=e[1]?[t.code,Dt(t.code,e[1])]:[t.code]}))}function Jt(e){return Yt((0,_t.x)(e.map((e=>{const t=rn(e);let n=Uint8Array.from(Rt().encode(t.code));return e.length>1&&null!=e[1]&&(n=(0,_t.x)([n,e[1]])),n}))))}function Xt(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return Rt().decode(t)+(Rt().decode.bytes??0)}function Zt(e){const t=[];let n=0;for(;n<e.length;){const r=Rt().decode(e,n),s=Rt().decode.bytes??0,o=Xt(Ct(r),e.slice(n+s));if(0===o){t.push([r]),n+=s;continue}const a=e.slice(n+s,n+s+o);if(n+=o+s,n>e.length)throw nn("Invalid address Uint8Array: "+(0,Tt.d)(e,"base16"));t.push([r,a])}return t}function Gt(e){return function(e){const t=[];return e.map((e=>{const n=rn(e);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),tn(t.join("/"))}($t(Zt(e)))}function Qt(e){const t=function(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const s=n[r],o=Ct(s);if(0!==o.size){if(r++,r>=n.length)throw nn("invalid address: "+e);if(!0===o.path){t.push([s,tn(n.slice(r).join("/"))]);break}t.push([s,n[r]])}else t.push([s])}return t}(e=tn(e));return Jt(t.map((e=>{Array.isArray(e)||(e=[e]);const t=rn(e);return e.length>1?[t.code,Lt(t.code,e[1])]:[t.code]})))}function Yt(e){const t=en(e);if(null!=t)throw t;return Uint8Array.from(e)}function en(e){try{Zt(e)}catch(t){return t}}function tn(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function nn(e){return new Error("Error parsing address: "+e)}function rn(e){return Ct(e[0])}var sn,on,an,cn,ln=n(54823),un=n.n(ln),hn=n(20296),dn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},fn=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};const pn=Symbol.for("nodejs.util.inspect.custom"),gn=[Ct("dns").code,Ct("dns4").code,Ct("dns6").code,Ct("dnsaddr").code],yn=new Map,mn=Symbol.for("@multiformats/js-multiaddr/multiaddr");function wn(e){return Boolean(e?.[mn])}class bn{constructor(e){if(sn.set(this,void 0),on.set(this,void 0),an.set(this,void 0),this[cn]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=Yt(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Qt(e)}else{if(!wn(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=Yt(e.bytes)}}toString(){return null==dn(this,sn,"f")&&fn(this,sn,Gt(this.bytes),"f"),dn(this,sn,"f")}toJSON(){return this.toString()}toOptions(){let e,t,n,r,s="";const o=Ct("tcp"),a=Ct("udp"),i=Ct("ip4"),c=Ct("ip6"),l=Ct("dns6"),u=Ct("ip6zone");for(const[h,d]of this.stringTuples())h===u.code&&(s=`%${d??""}`),gn.includes(h)&&(t=o.name,r=443,n=`${d??""}${s}`,e=h===l.code?6:4),h!==o.code&&h!==a.code||(t=Ct(h).name,r=parseInt(d??"")),h!==i.code&&h!==c.code||(t=Ct(h).name,n=`${d??""}${s}`,e=h===c.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:r}}protos(){return this.protoCodes().map((e=>Object.assign({},Ct(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;for(;n<t.length;){const r=Rt().decode(t,n),s=Rt().decode.bytes??0;n+=Xt(Ct(r),t.slice(n+s))+s,e.push(r)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==dn(this,on,"f")&&fn(this,on,Zt(this.bytes),"f"),dn(this,on,"f")}stringTuples(){return null==dn(this,an,"f")&&fn(this,an,$t(this.tuples()),"f"),dn(this,an,"f")}encapsulate(e){return e=new bn(e),new bn(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new bn(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new bn(Jt(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===Bt.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?(0,Tt.d)(Ae.decode(`z${e}`),"base58btc"):(0,Tt.d)(et.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>!0===Ct(e[0]).path))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return(0,hn.a)(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=yn.get(t.name);if(null==n)throw un()(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map((e=>new bn(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(sn=new WeakMap,on=new WeakMap,an=new WeakMap,cn=mn,pn)](){return`Multiaddr(${Gt(this.bytes)})`}}var vn=n(12544);function En(e){try{e=(0,vn._)(new bn(e))}catch(t){}return e=e.toString()}const Pn=bt("js-kubo-rpc-client:lib:error-handler"),Sn=Pt.A.bind({ignoreUndefined:!0}),Tn=dt.isBrowser||dt.isWebWorker?location.protocol:"http",jn=dt.isBrowser||dt.isWebWorker?location.hostname:"localhost",An=dt.isBrowser||dt.isWebWorker?location.port:"5001",xn=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const n=await e.json();Pn(n),t=n.Message||n.message}else t=await e.text()}catch(r){Pn("Failed to parse error response",r),t=r.message}let n=new(Et().HTTPError)(e);throw t&&(t.includes("deadline has elapsed")&&(n=new(Et().TimeoutError)),t&&t.includes("context deadline exceeded")&&(n=new(Et().TimeoutError))),t&&t.includes("request timed out")&&(n=new(Et().TimeoutError)),t&&(n.message=t),n},Nn=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kn=e=>e.replace(Nn,(function(e){return"-"+e.toLowerCase()}));class Bn extends(Et()){constructor(){var e;const t=function(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if("string"===typeof n||(0,ht.R8)(n))e=new URL(En(n));else if(n instanceof URL)e=n;else if("string"===typeof n.url||(0,ht.R8)(n.url))e=new URL(En(n.url)),r=n;else if(n.url instanceof URL)e=n.url,r=n;else{r=n||{};const t=(r.protocol||Tn).replace(":",""),s=(r.host||jn).split(":")[0],o=r.port||An;e=new URL("".concat(t,"://").concat(s,":").concat(o))}if(r.apiPath?e.pathname=r.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),dt.isNode){const e=void 0;t=r.agent||new e({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var n;super({timeout:(n=t.timeout||0,("string"===typeof n?yt(n):n)||void 0),headers:t.headers,base:"".concat(t.url),handleError:xn,transformSearchParams:e=>{const t=new URLSearchParams;for(const[n,r]of e)"undefined"!==r&&"null"!==r&&"signal"!==n&&t.append(kn(n),r),"timeout"!==n||isNaN(r)||t.append(kn(n),r);return t},agent:t.agent}),e=this,delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof n||n.startsWith("/")||(n="".concat(t.url,"/").concat(n)),r.call(e,n,Sn(s,{method:"POST"}))}}}Et().HTTPError;const Un=e=>t=>e(new Bn(t),t);function Cn(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function In(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw un()(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function Rn(){let{arg:e,searchParams:t,hashAlg:n,mtime:r,mode:s,...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(o={...o,...t}),n&&(o.hash=n),null!=r&&(r=In(r),o.mtime=r.secs,o.mtimeNsecs=r.nsecs),null!=s&&(o.mode=Cn(s)),o.timeout&&!isNaN(o.timeout)&&(o.timeout="".concat(o.timeout,"ms")),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(o);return e.forEach((e=>a.append("arg",e))),a}const On=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()).Keys||[]).map((e=>et.parse(e["/"])))})),_n=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:Rn({...n,peer:t.toString()}),headers:n.headers})).json()).Keys||[]).map((e=>et.parse(e["/"])))}));var Dn=n(67136);const Ln=Symbol.for("@libp2p/peer-id");class zn extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),(0,Dn.A)(this,"code",void 0),(0,Dn.A)(this,"type",void 0),this.code=zn.code,this.type=zn.type}}(0,Dn.A)(zn,"code","ABORT_ERR"),(0,Dn.A)(zn,"type","aborted");Error;const Mn=Symbol.for("nodejs.util.inspect.custom"),Hn=Object.values(ct).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),ct.identity.decoder),qn=114,Fn=36,Vn=37;class Wn{constructor(e){(0,Dn.A)(this,"type",void 0),(0,Dn.A)(this,"multihash",void 0),(0,Dn.A)(this,"privateKey",void 0),(0,Dn.A)(this,"publicKey",void 0),(0,Dn.A)(this,"string",void 0),(0,Dn.A)(this,Ln,!0),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PeerId(".concat(this.toString(),")")}toString(){return null==this.string&&(this.string=Ae.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return et.createV1(qn,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return(0,hn.a)(this.multihash.bytes,e);if("string"===typeof e)return Xn(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return(0,hn.a)(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Mn](){return"PeerId(".concat(this.toString(),")")}}class Kn extends Wn{constructor(e){super({...e,type:"RSA"}),(0,Dn.A)(this,"type","RSA"),(0,Dn.A)(this,"publicKey",void 0),this.publicKey=e.publicKey}}class $n extends Wn{constructor(e){super({...e,type:"Ed25519"}),(0,Dn.A)(this,"type","Ed25519"),(0,Dn.A)(this,"publicKey",void 0),this.publicKey=e.multihash.digest}}class Jn extends Wn{constructor(e){super({...e,type:"secp256k1"}),(0,Dn.A)(this,"type","secp256k1"),(0,Dn.A)(this,"publicKey",void 0),this.publicKey=e.multihash.digest}}function Xn(e,t){var n;if(t=null!==(n=t)&&void 0!==n?n:Hn,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=X(Ae.decode("z".concat(e)));return e.startsWith("12D")?new $n({multihash:t}):e.startsWith("16U")?new Jn({multihash:t}):new Kn({multihash:t})}return function(e){try{const t=X(e);if(t.code===Q.code){if(t.digest.length===Fn)return new $n({multihash:t});if(t.digest.length===Vn)return new Jn({multihash:t})}if(t.code===ze.code)return new Kn({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==qn)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===ze.code)return new Kn({multihash:e.multihash});if(t.code===Q.code){if(t.digest.length===Fn)return new $n({multihash:e.multihash});if(t.digest.length===Vn)return new Jn({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(et.decode(e))}throw new Error("Supplied PeerID CID is invalid")}(Hn.decode(e))}const Zn=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bitswap/stat",{searchParams:Rn(t),signal:t.signal,headers:t.headers});return function(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((e=>et.parse(e["/"]))),peers:(e.Peers||[]).map((e=>Xn(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}(await n.json())}));const Gn=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/get",{signal:n.signal,searchParams:Rn({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}));function Qn(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}}function Yn(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}()}catch(t){return Promise.reject(t)}}async function er(e){const t=[];for await(const n of e)t.push(n);return t}function tr(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function nr(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function rr(e){return"object"===typeof e&&(e.path||e.content)}const sr=e=>e&&"function"===typeof e.getReader;async function or(e){if(tr(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(nr(e))return e;if(sr(e)&&(e=Yn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Qn(e),{value:n,done:r}=await t.peek();if(r)return ar(t);if(t.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await er(t))]);if(tr(n)||"string"===typeof n||n instanceof String)return ar(t)}throw un()(new Error("Unexpected input: ".concat(e)),"ERR_UNEXPECTED_INPUT")}async function ar(e){const t=[];for await(const n of e)t.push(n);return new Blob(t)}async function*ir(e,t){for await(const n of e)yield t(n)}var cr=n(9776),lr=n.n(cr);const ur=lr().Reader,hr=lr().Writer,dr=lr().util,fr=lr().roots["ipfs-unixfs"]||(lr().roots["ipfs-unixfs"]={});fr.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Type=0,e.prototype.Data=dr.newBuffer([]),e.prototype.filesize=dr.Long?dr.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=dr.emptyArray,e.prototype.hashType=dr.Long?dr.Long.fromBits(0,0,!0):0,e.prototype.fanout=dr.Long?dr.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=hr.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var n=0;n<e.blocksizes.length;++n)t.uint32(32).uint64(e.blocksizes[n]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&fr.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof ur||(e=ur.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fr.Data;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.Type=e.int32();break;case 2:r.Data=e.bytes();break;case 3:r.filesize=e.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2===(7&s))for(var o=e.uint32()+e.pos;e.pos<o;)r.blocksizes.push(e.uint64());else r.blocksizes.push(e.uint64());break;case 5:r.hashType=e.uint64();break;case 6:r.fanout=e.uint64();break;case 7:r.mode=e.uint32();break;case 8:r.mtime=fr.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("Type"))throw dr.ProtocolError("missing required 'Type'",{instance:r});return r},e.fromObject=function(e){if(e instanceof fr.Data)return e;var t=new fr.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?dr.base64.decode(e.Data,t.Data=dr.newBuffer(dr.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(dr.Long?(t.filesize=dr.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new dr.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var n=0;n<e.blocksizes.length;++n)dr.Long?(t.blocksizes[n]=dr.Long.fromValue(e.blocksizes[n])).unsigned=!0:"string"===typeof e.blocksizes[n]?t.blocksizes[n]=parseInt(e.blocksizes[n],10):"number"===typeof e.blocksizes[n]?t.blocksizes[n]=e.blocksizes[n]:"object"===typeof e.blocksizes[n]&&(t.blocksizes[n]=new dr.LongBits(e.blocksizes[n].low>>>0,e.blocksizes[n].high>>>0).toNumber(!0))}if(null!=e.hashType&&(dr.Long?(t.hashType=dr.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new dr.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(dr.Long?(t.fanout=dr.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new dr.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=fr.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocksizes=[]),t.defaults){if(n.Type=t.enums===String?"Raw":0,t.bytes===String?n.Data="":(n.Data=[],t.bytes!==Array&&(n.Data=dr.newBuffer(n.Data))),dr.Long){var r=new dr.Long(0,0,!0);n.filesize=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.filesize=t.longs===String?"0":0;if(dr.Long){r=new dr.Long(0,0,!0);n.hashType=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.hashType=t.longs===String?"0":0;if(dr.Long){r=new dr.Long(0,0,!0);n.fanout=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.fanout=t.longs===String?"0":0;n.mode=0,n.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(n.Type=t.enums===String?fr.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(n.Data=t.bytes===String?dr.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?n.filesize=t.longs===String?String(e.filesize):e.filesize:n.filesize=t.longs===String?dr.Long.prototype.toString.call(e.filesize):t.longs===Number?new dr.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){n.blocksizes=[];for(var s=0;s<e.blocksizes.length;++s)"number"===typeof e.blocksizes[s]?n.blocksizes[s]=t.longs===String?String(e.blocksizes[s]):e.blocksizes[s]:n.blocksizes[s]=t.longs===String?dr.Long.prototype.toString.call(e.blocksizes[s]):t.longs===Number?new dr.LongBits(e.blocksizes[s].low>>>0,e.blocksizes[s].high>>>0).toNumber(!0):e.blocksizes[s]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?n.hashType=t.longs===String?String(e.hashType):e.hashType:n.hashType=t.longs===String?dr.Long.prototype.toString.call(e.hashType):t.longs===Number?new dr.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?n.fanout=t.longs===String?String(e.fanout):e.fanout:n.fanout=t.longs===String?dr.Long.prototype.toString.call(e.fanout):t.longs===Number?new dr.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(n.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(n.mtime=fr.UnixTime.toObject(e.mtime,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,lr().util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),fr.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.Seconds=dr.Long?dr.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=hr.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof ur||(e=ur.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fr.UnixTime;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:r.Seconds=e.int64();break;case 2:r.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("Seconds"))throw dr.ProtocolError("missing required 'Seconds'",{instance:r});return r},e.fromObject=function(e){if(e instanceof fr.UnixTime)return e;var t=new fr.UnixTime;return null!=e.Seconds&&(dr.Long?(t.Seconds=dr.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new dr.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(dr.Long){var r=new dr.Long(0,0,!1);n.Seconds=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.Seconds=t.longs===String?"0":0;n.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?n.Seconds=t.longs===String?String(e.Seconds):e.Seconds:n.Seconds=t.longs===String?dr.Long.prototype.toString.call(e.Seconds):t.longs===Number?new dr.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=e.FractionalNanoseconds),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,lr().util.toJSONOptions)},e})(),fr.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=hr.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof ur||(e=ur.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new fr.Metadata;e.pos<n;){var s=e.uint32();if(s>>>3===1)r.MimeType=e.string();else e.skipType(7&s)}return r},e.fromObject=function(e){if(e instanceof fr.Metadata)return e;var t=new fr.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(n.MimeType=e.MimeType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,lr().util.toJSONOptions)},e})(),parseInt("0644",8),parseInt("0755",8);function pr(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function gr(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const n=e.getTime(),r=Math.floor(n/1e3);t={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw un()(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}async function yr(e,t){const{path:n,mode:r,mtime:s,content:o}=e,a={path:n||"",mode:pr(r),mtime:gr(s)};return o?a.content=await t(o):n||(a.content=await t(e)),a}function mr(e){return async function*(e,t){if("string"===typeof e||e instanceof String||tr(e)||nr(e)||e._readableState)throw un()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(sr(e)&&(e=Yn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Qn(e),{value:r,done:s}=await n.peek();if(s)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw un()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*ir(n,(e=>yr({content:e},t))));if(tr(r))return void(yield yr({content:n},t));if(rr(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||sr(r)||nr(r))return void(yield*ir(n,(e=>yr(e,t))))}if(rr(e))throw un()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw un()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}(e,or)}function wr(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],s=new FormData;let o=0,a=0;for await(const{content:i,path:c,mode:l,mtime:u}of mr(e)){let e="";const t=i?"file":"dir";o>0&&(e="-".concat(o));let n=t+e;const h=[];if(null!==l&&void 0!==l&&h.push("mode=".concat(wr(l))),null!=u){const{secs:e,nsecs:t}=u;h.push("mtime=".concat(e)),null!=t&&h.push("mtime-nsecs=".concat(t))}if(h.length&&(n="".concat(n,"?").concat(h.join("&"))),i){s.set(n,i,null!=c?encodeURIComponent(c):void 0);const e=a+i.size;r.push({name:c,start:a,end:e}),a=e}else{if(null==c)throw new Error("path or content or both must be set");s.set(n,new File([""],encodeURIComponent(c),{type:"application/x-directory"}))}o++}return{total:a,parts:r,headers:n,body:s}}var vr=n(38758);function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,vr.anySignal)(function(e){return e.filter(Boolean)}(t))}const Pr=Un(((e,t)=>async function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new AbortController,o=Er(s.signal,r.signal);let a;try{const t=await e.post("block/put",{signal:o,searchParams:Rn(r),...await br([n],s,r.headers)});a=await t.json()}catch(i){if("dag-pb"===r.format)return t(n,{...r,format:"protobuf"});if("dag-cbor"===r.format)return t(n,{...r,format:"cbor"});throw i}return et.parse(a.Key)})),Sr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){Array.isArray(t)||(t=[t]);const r=await e.post("block/rm",{signal:n.signal,searchParams:Rn({arg:t.map((e=>e.toString())),"stream-channels":!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield Tr(e)}()}catch(n){return Promise.reject(n)}}));function Tr(e){const t={cid:et.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const jr=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("block/stat",{signal:n.signal,searchParams:Rn({arg:t.toString(),...n}),headers:n.headers}),s=await r.json();return{cid:et.parse(s.Key),size:s.Size}}));function Ar(e){return{get:Gn(e),put:Pr(e),rm:Sr(e),stat:jr(e)}}const xr=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/add",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,ht.HZ)(e)))}})),Nr=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:Rn(t),headers:t.headers}),{Peers:r}=await n.json();return{Peers:r.map((e=>(0,ht.HZ)(e)))}})),kr=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("bootstrap/rm",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),{Peers:s}=await r.json();return{Peers:s.map((e=>(0,ht.HZ)(e)))}}));function Br(e){return{add:xr(e),list:Nr(e),rm:kr(e)}}const Ur=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("config/profile/apply",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),s=await r.json();return{original:s.OldCfg,updated:s.NewCfg}}));function Cr(e){return{apply:Ur(e)}}const Ir=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("key argument is required");const r=await e.post("config",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});return(await r.json()).Value})),Rr=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("config/show",{signal:t.signal,searchParams:Rn({...t}),headers:t.headers});return await n.json()})),Or=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new AbortController,s=Er(r.signal,n.signal),o=await e.post("config/replace",{signal:s,searchParams:Rn(n),...await br([(0,Ot.s)(JSON.stringify(t))],r,n.headers)});await o.text()})),_r=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof t)throw new Error("Invalid key type");const s={...r,...Dr(t,n)},o=await e.post("config",{signal:r.signal,searchParams:Rn(s),headers:r.headers});await o.text()})),Dr=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Lr(e){return{getAll:Rr(e),get:Ir(e),set:_r(e),replace:Or(e),profiles:Cr(e)}}const zr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dag/export",{signal:n.signal,searchParams:Rn({arg:t.toString()}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}}));async function*Mr(e,t,n,r,s){const o=async e=>{const t=await n.getCodec(e.code),o=await r(e,s);return t.decode(o)},a=t.split("/").filter(Boolean);let i=await o(e),c=e;for(;a.length;){const e=a.shift();if(!e)throw un()(new Error('Could not resolve path "'.concat(t,'"')),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(i,e))throw un()(new Error('no link named "'.concat(e,'" under ').concat(c)),"ERR_NO_LINK");i=i[e],yield{value:i,remainderPath:a.join("/")};const n=et.asCID(i);n&&(c=n,i=await o(i))}yield{value:i,remainderPath:""}}async function Hr(e){let t;for await(const n of e)t=n;return t}const qr=(e,t)=>{const n=Un(((t,n)=>{const r=Gn(n);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.path){const s=n.localResolve?await async function(e){for await(const t of e)return t}(Mr(t,n.path,e,r,n)):await Hr(Mr(t,n.path,e,r,n)),o=s;if(!o)throw un()(new Error("Not found"),"ERR_NOT_FOUND");return o}const s=await e.getCodec(t.code),o=await r(t,n);return{value:s.decode(o),remainderPath:""}}}));return n(t)},Fr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,s=Er(r.signal,n.signal),{headers:o,body:a}=await br(t,r,n.headers),i=await e.post("dag/import",{signal:s,headers:o,body:a,searchParams:Rn({"pin-roots":n.pinRoots})});for await(const{Root:e}of i.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:n}=e;yield{root:{cid:et.parse(t),pinErrorMsg:n}}}}()}catch(n){return Promise.reject(n)}})),Vr=(e,t)=>Un((t=>async function(n){const r={storeCodec:"dag-cbor",hashAlg:"sha2-256",...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};let s;if(r.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=n}else{s=(await e.getCodec(r.storeCodec)).encode(n),r.inputCodec=r.storeCodec}const o=new AbortController,a=Er(o.signal,r.signal),i=await t.post("dag/put",{timeout:r.timeout,signal:a,searchParams:Rn(r),...await br([s],o,r.headers)}),c=await i.json();return et.parse(c.Cid["/"])}))(t),Wr=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("dag/resolve",{signal:n.signal,searchParams:Rn({arg:"".concat(t).concat(n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):""),...n}),headers:n.headers}),s=await r.json();return{cid:et.parse(s.Cid["/"]),remainderPath:s.RemPath}}));function Kr(e,t){return{export:zr(t),get:qr(e,t),import:Fr(t),put:Vr(e,t),resolve:Wr(t)}}const $r=e=>{if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:Xn(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:Xn(t),multiaddrs:n.map((e=>(0,ht.HZ)(e))),protocols:[]}})),providers:(e.Responses||[]).map((e=>{let{ID:t,Addrs:n}=e;return{id:Xn(t),multiaddrs:n.map((e=>(0,ht.HZ)(e))),protocols:[]}}))};if(2===e.Type){var t;let n={id:null!==(t=e.ID)&&void 0!==t?t:Xn(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(n={id:Xn(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>(0,ht.HZ)(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:n}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((e=>{let{ID:t,Addrs:n}=e;return{id:Xn(t),multiaddrs:n.map((e=>(0,ht.HZ)(e))),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:(0,Ot.s)(e.Extra,"base64pad")};if(6===e.Type){const t=e.Responses.map((e=>{let{ID:t}=e;return Xn(t)}));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:Xn(e.ID)};throw new Error("Unknown DHT event type")},Jr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findpeer",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});for await(const e of r.ndjson())yield $r(e)}()}catch(n){return Promise.reject(n)}})),Xr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/findprovs",{signal:n.signal,searchParams:Rn({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield $r(e)}()}catch(n){return Promise.reject(n)}})),Zr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("routing/get",{signal:n.signal,searchParams:Rn({arg:t instanceof Uint8Array?(0,Tt.d)(t):t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield $r(e)}()}catch(n){return Promise.reject(n)}})),Gr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return async function*(){const r=Array.isArray(t)?t:[t],s=await e.post("routing/provide",{signal:n.signal,searchParams:Rn({arg:r.map((e=>e.toString())),...n}),headers:n.headers});for await(const e of s.ndjson())yield $r(e)}()}catch(n){return Promise.reject(n)}})),Qr=Un((e=>function(t,n){try{let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return async function*(){const s=new AbortController,o=Er(s.signal,r.signal),a=await e.post("routing/put",{signal:o,searchParams:Rn({arg:t instanceof Uint8Array?(0,Tt.d)(t):t.toString(),...r}),...await br([n],s,r.headers)});for await(const e of a.ndjson())yield $r(e)}()}catch(r){return Promise.reject(r)}})),Yr=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("dht/query",{signal:n.signal,searchParams:Rn({arg:t.toString(),...n}),headers:n.headers});for await(const e of r.ndjson())yield $r(e)}()}catch(n){return Promise.reject(n)}}));function es(e){return{findPeer:Jr(e),findProvs:Xr(e),get:Zr(e),provide:Gr(e),put:Qr(e),query:Yr(e)}}const ts=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/cmds",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()})),ns=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/net",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()})),rs=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("diag/sys",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()}));function ss(e){return{cmds:ts(e),net:ns(e),sys:rs(e)}}const os=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Array.isArray(t)?t:[t],o=await e.post("files/cp",{signal:r.signal,searchParams:Rn({arg:s.concat(n).map((e=>et.asCID(e)?"/ipfs/".concat(e):e)),...r}),headers:r.headers});await o.text()})),as=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const r=await e.post("files/flush",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),s=await r.json();return et.parse(s.Cid)}));function is(e){if(null==e)return e;const t=/^[A-Z]+$/;return Object.keys(e).reduce(((n,r)=>(t.test(r)?n[r.toLowerCase()]=e[r]:t.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=e[r]:n[r]=e[r],n)),{})}function cs(e){const t=is(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const ls=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){if(!t)throw new Error("ipfs.files.ls requires a path");const r=await e.post("files/ls",{signal:n.signal,searchParams:Rn({arg:et.asCID(t)?"/ipfs/".concat(t):t,long:!0,...n,stream:!0}),headers:n.headers});for await(const e of r.ndjson())if("Entries"in e)for(const t of e.Entries||[])yield us(cs(t));else yield us(cs(e))}()}catch(n){return Promise.reject(n)}}));function us(e){return e.hash&&(e.cid=et.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}const hs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/mkdir",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});await r.text()})),ds=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);const s=await e.post("files/mv",{signal:r.signal,searchParams:Rn({arg:t.concat(n),...r}),headers:r.headers});await s.text()}));var fs=n(11943),ps=n.n(fs);const gs=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("files/read",{signal:n.signal,searchParams:Rn({arg:t,count:n.length,...n}),headers:n.headers});yield*ps()(r.body)}()}catch(n){return Promise.reject(n)}})),ys=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/rm",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),s=await r.text();if(""!==s){const e=new(Et().HTTPError)(r);throw e.message=s,e}})),ms=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("files/stat",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),s=await r.json();return s.WithLocality=s.WithLocality||!1,(o=cs(s)).cid=et.parse(o.hash),delete o.hash,o;var o}));const ws=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new AbortController,o=Er(s.signal,r.signal),a=await e.post("files/write",{signal:o,searchParams:Rn({arg:t,streamChannels:!0,count:r.length,...r}),...await br([{content:n,path:"arg",mode:Cn(r.mode),mtime:In(r.mtime)}],s,r.headers)});await a.text()}));function bs(e){return{cp:os(e),flush:as(e),ls:ls(e),mkdir:hs(e),mv:ds(e),read:gs(e),rm:ys(e),stat:ms(e),write:ws(e)}}const vs=Un((e=>async function(e,t){throw un()(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Es={type:"ed25519"},Ps=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Es;const r=await e.post("key/gen",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});return is(await r.json())})),Ss=Un((e=>async function(t,n,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=await e.post("key/import",{signal:s.signal,searchParams:Rn({arg:t,pem:n,password:r,...s}),headers:s.headers});return is(await o.json())})),Ts=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("key/list",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return((await n.json()).Keys||[]).map((e=>is(e)))})),js=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("key/rename",{signal:r.signal,searchParams:Rn({arg:[t,n],...r}),headers:r.headers});return is(await s.json())})),As=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("key/rm",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});return is((await r.json()).Keys[0])}));function xs(e){return{export:vs(e),gen:Ps(e),import:Ss(e),list:Ts(e),rename:js(e),rm:As(e)}}const Ns=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("log/level",{signal:r.signal,searchParams:Rn({arg:[t,n],...r}),headers:r.headers});return is(await s.json())})),ks=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("log/ls",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return(await n.json()).Strings})),Bs=Un((e=>function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("log/tail",{signal:t.signal,searchParams:Rn(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}));function Us(e){return{level:Ns(e),ls:ks(e),tail:Bs(e)}}const Cs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/publish",{signal:n.signal,searchParams:Rn({arg:"".concat(t),...n}),headers:n.headers});return is(await r.json())})),Is=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("name/resolve",{signal:n.signal,searchParams:Rn({arg:t,stream:!0,...n}),headers:n.headers});for await(const e of r.ndjson())yield e.Path}()}catch(n){return Promise.reject(n)}})),Rs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});return is(await r.json())})),Os=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return is(await n.json())})),_s=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return(await n.json()).Strings||[]}));function Ds(e){return{cancel:Rs(e),state:Os(e),subs:_s(e)}}function Ls(e){return{publish:Cs(e),resolve:Is(e),pubsub:Ds(e)}}const zs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("object/data",{signal:n.signal,searchParams:Rn({arg:"".concat(t instanceof Uint8Array?et.decode(t):t),...n}),headers:n.headers}),s=await r.arrayBuffer();return new Uint8Array(s,0,s.byteLength)})),Ms=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("object/get",{signal:n.signal,searchParams:Rn({arg:"".concat(t instanceof Uint8Array?et.decode(t):t),dataEncoding:"base64",...n}),headers:n.headers}),s=await r.json();return{Data:(0,Ot.s)(s.Data,"base64pad"),Links:(s.Links||[]).map((e=>({Name:e.Name,Hash:et.parse(e.Hash),Tsize:e.Size})))}})),Hs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("object/links",{signal:n.signal,searchParams:Rn({arg:"".concat(t instanceof Uint8Array?et.decode(t):t),...n}),headers:n.headers});return((await r.json()).Links||[]).map((e=>({Name:e.Name,Tsize:e.Size,Hash:et.parse(e.Hash)})))})),qs=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("object/new",{signal:t.signal,searchParams:Rn({arg:t.template,...t}),headers:t.headers}),{Hash:r}=await n.json();return et.parse(r)})),Fs=(e,t)=>Un((n=>{const r=Vr(e,t);return async function(e){return r(e,{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}}))(t),Vs=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("object/stat",{signal:n.signal,searchParams:Rn({arg:"".concat(t),...n}),headers:n.headers}),s=await r.json();return{...s,Hash:et.parse(s.Hash)}})),Ws=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("object/patch/add-link",{signal:r.signal,searchParams:Rn({arg:["".concat(t),n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...r}),headers:r.headers}),{Hash:o}=await s.json();return et.parse(o)})),Ks=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new AbortController,o=Er(s.signal,r.signal),a=await e.post("object/patch/append-data",{signal:o,searchParams:Rn({arg:"".concat(t),...r}),...await br([n],s,r.headers)}),{Hash:i}=await a.json();return et.parse(i)})),$s=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await e.post("object/patch/rm-link",{signal:r.signal,searchParams:Rn({arg:["".concat(t),n.Name||n.name||null],...r}),headers:r.headers}),{Hash:o}=await s.json();return et.parse(o)})),Js=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=new AbortController,o=Er(s.signal,r.signal),a=await e.post("object/patch/set-data",{signal:o,searchParams:Rn({arg:["".concat(t)],...r}),...await br([n],s,r.headers)}),{Hash:i}=await a.json();return et.parse(i)}));function Xs(e){return{addLink:Ws(e),appendData:Ks(e),rmLink:$s(e),setData:Js(e)}}function Zs(e,t){return{data:zs(t),get:Ms(t),links:Hs(t),new:qs(t),put:Fs(e,t),stat:Vs(t),patch:Xs(t)}}function Gs(e){return null!=et.asCID(e)}async function*Qs(e){if(null===e||void 0===e)throw un()(new Error("Unexpected input: ".concat(e)),"ERR_UNEXPECTED_INPUT");const t=et.asCID(e);if(t)yield Ys({cid:t});else{if(!(e instanceof String||"string"===typeof e)){if(null!=e.cid||null!=e.path)return yield Ys(e);if(n=e,Symbol.iterator in n){const t=e[Symbol.iterator](),n=t.next();if(n.done)return t;if(Gs(n.value)){yield Ys({cid:n.value});for(const e of t)yield Ys({cid:e});return}if(n.value instanceof String||"string"===typeof n.value){yield Ys({path:n.value});for(const e of t)yield Ys({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield Ys(n.value);for(const e of t)yield Ys(e);return}throw un()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}var n;if(function(e){return Symbol.asyncIterator in e}(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done)return t;if(Gs(n.value)){yield Ys({cid:n.value});for await(const e of t)yield Ys({cid:e});return}if(n.value instanceof String||"string"===typeof n.value){yield Ys({path:n.value});for await(const e of t)yield Ys({path:e});return}if(null!=n.value.cid||null!=n.value.path){yield Ys(n.value);for await(const e of t)yield Ys(e);return}throw un()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw un()(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}yield Ys({path:e})}}function Ys(e){const t=e.cid||"".concat(e.path);if(!t)throw un()(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const n={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(n.metadata=e.metadata),n}const eo=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:s,metadata:o}of Qs(t)){const t=await e.post("pin/add",{signal:n.signal,searchParams:Rn({...n,arg:r,recursive:s,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:n.headers});for await(const e of t.ndjson())if(e.Pins)for(const t of e.Pins)yield et.parse(t);else yield et.parse(e)}}()}catch(n){return Promise.reject(n)}}));function to(e){const t=eo(e);return Un((()=>async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hr(t([{path:e,...n}],n))}))(e)}function no(e,t,n){const r={type:e,cid:et.parse(t)};return n&&(r.metadata=n),r}const ro=Un((e=>function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let n=[];t.paths&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const r=await e.post("pin/ls",{signal:t.signal,searchParams:Rn({...t,arg:n.map((e=>"".concat(e))),stream:!0}),headers:t.headers});for await(const e of r.ndjson()){if(e.Keys){for(const t of Object.keys(e.Keys))yield no(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield no(e.Type,e.Cid,e.Metadata)}}()}catch(t){return Promise.reject(t)}})),so=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{path:r,recursive:s}of Qs(t)){const t=new URLSearchParams(n.searchParams);t.append("arg","".concat(r)),null!=s&&t.set("recursive",String(s));const o=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:Rn({...n,arg:"".concat(r),recursive:s})});for await(const e of o.ndjson())e.Pins?yield*e.Pins.map((e=>et.parse(e))):yield et.parse(e)}}()}catch(n){return Promise.reject(n)}})),oo=e=>{const t=so(e);return Un((()=>async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Hr(t([{path:e,...n}],n))}))(e)},ao=e=>{let{Name:t,Status:n,Cid:r}=e;return{cid:et.parse(r),name:t,status:n}},io=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},co=e=>{if(et.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of ".concat(typeof e))},lo=e=>{let{service:t,cid:n,name:r,status:s,all:o}=e;const a=Rn({service:io(t),name:r,force:!!o||void 0});if(n)for(const i of n)a.append("cid",co(i));if(s)for(const i of s)a.append("status",i);return a},uo=e=>{let{cid:t,service:n,background:r,name:s,origins:o}=e;const a=Rn({arg:co(t),service:io(n),name:s,background:!!r||void 0});if(o)for(const i of o)a.append("origin",i.toString());return a};function ho(e){return async function(t,n){let{timeout:r,signal:s,headers:o,...a}=n;const i=await e.post("pin/remote/add",{timeout:r,signal:s,headers:o,searchParams:uo({cid:t,...a})});return ao(await i.json())}}function fo(e){return function(t){try{let{timeout:n,signal:r,headers:s,...o}=t;return async function*(){const t=await e.post("pin/remote/ls",{timeout:n,signal:r,headers:s,searchParams:lo(o)});for await(const e of t.ndjson())yield ao(e)}()}catch(n){return Promise.reject(n)}}}function po(e){return async function(t){let{timeout:n,signal:r,headers:s,...o}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:s,searchParams:lo({...o,all:!1})})}}function go(e){return async function(t){let{timeout:n,signal:r,headers:s,...o}=t;await e.post("pin/remote/rm",{timeout:n,signal:r,headers:s,searchParams:lo({...o,all:!0})})}}function yo(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function mo(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:wo(e.Stat)}}}function wo(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:n,Queued:r,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:n,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function bo(e){return async function(t,n){const{endpoint:r,key:s,headers:o,timeout:a,signal:i}=n;await e.post("pin/remote/service/add",{timeout:a,signal:i,searchParams:Rn({arg:[t,yo(r),s]}),headers:o})}}function vo(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:n,headers:r,timeout:s,signal:o}=t,a=await e.post("pin/remote/service/ls",{timeout:s,signal:o,headers:r,searchParams:!0===n?Rn({stat:n}):void 0}),{RemoteServices:i}=await a.json();return i.map(mo)}}function Eo(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:Rn({arg:t})})}}function Po(e){const t=new Bn(e);return{add:bo(t),ls:vo(t),rm:Eo(t)}}function So(e){const t=new Bn(e);return{add:ho(t),ls:fo(t),rm:po(t),rmAll:go(t),service:Po(e)}}function To(e){return{addAll:eo(e),add:to(e),ls:ro(e),rmAll:so(e),rm:oo(e),remote:So(e)}}const jo=e=>(0,Tt.d)(Ao(e)),Ao=e=>Be.decode(e),xo=e=>BigInt("0x".concat((0,Tt.d)(Be.decode(e),"base16"))),No=e=>Be.encode((0,Ot.s)(e)),ko=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json();return r=n,(Array.isArray(r)?r.map(jo):r)||[];var r})),Bo=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("pubsub/peers",{signal:n.signal,searchParams:Rn({arg:No(t),...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),Uo=Un((e=>async function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Rn({arg:No(t),...r}),o=new AbortController,a=Er(o.signal,r.signal),i=await e.post("pubsub/pub",{signal:a,searchParams:s,...await br([n],o,r.headers)});await i.text()})),Co=bt("js-kubo-rpc-client:pubsub:subscribe"),Io=(e,t)=>Un((e=>async function(n,r){let s,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.signal=t.subscribe(n,r,a.signal);const i=new Promise(((e,t)=>{s=e,o=t})),c=setTimeout((()=>s()),1e3);return e.post("pubsub/sub",{signal:a.signal,searchParams:Rn({arg:No(n),...a}),headers:a.headers}).catch((e=>{t.unsubscribe(n,r),o(e)})).then((e=>{clearTimeout(c),e&&(!async function(e,t){let{onMessage:n,onEnd:r,onError:s}=t;s=s||Co;try{for await(const t of e.ndjson())try{if(!t.from)continue;var o,a;if(null!=t.from&&null!=t.seqno)n({type:"signed",from:Xn(t.from),data:Ao(t.data),sequenceNumber:xo(t.seqno),topic:jo(t.topicIDs[0]),key:Ao(null!==(o=t.key)&&void 0!==o?o:"u"),signature:Ao(null!==(a=t.signature)&&void 0!==a?a:"u")});else n({type:"unsigned",data:Ao(t.data),topic:jo(t.topicIDs[0])})}catch(i){i.message="Failed to parse pubsub message: ".concat(i.message),s(i,!1,t)}}catch(i){Ro(i)||s(i,!0)}finally{r()}}(e,{onMessage:e=>{r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>t.unsubscribe(n,r),onError:a.onError}),s())})),i}))(e);const Ro=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},Oo=(e,t)=>async function(e,n){t.unsubscribe(e,n)};class _o{constructor(){this._subs=new Map}subscribe(e,t,n){const r=this._subs.get(e)||[];if(r.find((e=>e.handler===t)))throw new Error("Already subscribed to ".concat(e," with this handler"));const s=new AbortController;return this._subs.set(e,[{handler:t,controller:s}].concat(r)),n&&n.addEventListener("abort",(()=>this.unsubscribe(e,t))),s.signal}unsubscribe(e,t){const n=this._subs.get(e)||[];let r;t?(this._subs.set(e,n.filter((e=>e.handler!==t))),r=n.filter((e=>e.handler===t))):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach((e=>e.controller.abort()))}}function Do(e){const t=new _o;return{ls:ko(e),peers:Bo(e),publish:Uo(e),subscribe:Io(e,t),unsubscribe:Oo(e,t)}}const Lo=Un((e=>function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("refs/local",{signal:t.signal,transform:is,searchParams:Rn(t),headers:t.headers});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}})),zo=Un(((e,t)=>Object.assign((function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=Array.isArray(t)?t:[t],s=await e.post("refs",{signal:n.signal,searchParams:Rn({arg:r.map((e=>"".concat(e instanceof Uint8Array?et.decode(e):e))),...n}),headers:n.headers,transform:is});yield*s.ndjson()}()}catch(n){return Promise.reject(n)}}),{local:Lo(t)}))),Mo=Un((e=>function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("repo/gc",{signal:t.signal,searchParams:Rn(t),headers:t.headers,transform:e=>({err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?et.parse(e.Key["/"]):null})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}})),Ho=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("repo/stat",{signal:t.signal,searchParams:Rn(t),headers:t.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}})),qo=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(await e.post("repo/version",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()).Version}));function Fo(e){return{gc:Mo(e),stat:Ho(e),version:qo(e)}}const Vo=Un((e=>function(){try{let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const n=await e.post("stats/bw",{signal:t.signal,searchParams:Rn(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*n.ndjson()}()}catch(t){return Promise.reject(t)}}));function Wo(e){return{bitswap:Zn(e),repo:Ho(e),bw:Vo(e)}}const Ko=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:Rn(t),headers:t.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((e=>({id:Xn(e),addrs:(r[e]||[]).map((e=>(0,ht.HZ)(e)))})))})),$o=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/connect",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),Jo=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("swarm/disconnect",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),{Strings:s}=await r.json();return s||[]})),Xo=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:Rn(t),headers:t.headers}),{Strings:r}=await n.json();return(r||[]).map((e=>(0,ht.HZ)(e)))})),Zo=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("swarm/peers",{signal:t.signal,searchParams:Rn(t),headers:t.headers}),{Peers:r}=await n.json();return(r||[]).map((e=>({addr:(0,ht.HZ)(e.Addr),peer:Xn(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}));function Go(e){return{addrs:Ko(e),connect:$o(e),disconnect:Jo(e),localAddrs:Xo(e),peers:Zo(e)}}const Qo=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=new AbortController,s=Er(r.signal,n.signal),{headers:o,body:a,total:i,parts:c}=await br(t,r,n.headers),[l,u]="function"===typeof n.progress?Yo(i,c,n.progress):[void 0,void 0],h=await e.post("add",{searchParams:Rn({"stream-channels":!0,...n,progress:Boolean(l)}),onUploadProgress:u,signal:s,headers:o,body:a});for await(let e of h.ndjson())e=is(e),void 0!==e.hash?yield ta(e):l&&l(e.bytes||0,e.name)}()}catch(n){return Promise.reject(n)}})),Yo=(e,t,n)=>t?[void 0,ea(e,t,n)]:[n,void 0],ea=(e,t,n)=>{let r=0;const s=t.length;return o=>{let{loaded:a,total:i}=o;const c=Math.floor(a/i*e);for(;r<s;){const{start:e,end:s,name:o}=t[r];if(c<s){n(c-e,o);break}n(s-e,o),r+=1}}};function ta(e){let{name:t,hash:n,size:r,mode:s,mtime:o,mtimeNsecs:a}=e;const i={path:t,cid:et.parse(n),size:parseInt(r)};return null!=s&&(i.mode=parseInt(s,8)),null!=o&&(i.mtime={secs:o,nsecs:a||0}),i}function na(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}()}catch(t){return Promise.reject(t)}}async function*ra(e){yield e}async function sa(e){if(tr(e))return ra(oa(e));if("string"===typeof e||e instanceof String)return ra(oa(e.toString()));if(nr(e))return"function"===typeof(t=e).stream?na(t.stream()):na(new Response(t).body);var t;if(sr(e)&&(e=Yn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Qn(e),{value:n,done:r}=await t.peek();if(r)return ra(new Uint8Array(0));if(t.push(n),Number.isInteger(n))return ra(Uint8Array.from(await er(t)));if(tr(n)||"string"===typeof n||n instanceof String)return ir(t,oa)}throw un()(new Error("Unexpected input: ".concat(e)),"ERR_UNEXPECTED_INPUT")}function oa(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):(0,Ot.s)(e.toString())}async function aa(e,t){const{path:n,mode:r,mtime:s,content:o}=e,a={path:n||"",mode:pr(r),mtime:gr(s)};return o?a.content=await t(o):n||(a.content=await t(e)),a}function ia(e){return async function*(e,t){if(null===e||void 0===e)throw un()(new Error("Unexpected input: ".concat(e)),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield aa(e.toString(),t);else if(tr(e)||nr(e))yield aa(e,t);else{if(sr(e)&&(e=Yn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const n=Qn(e),{value:r,done:s}=await n.peek();if(s)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||tr(r)||"string"===typeof r||r instanceof String)return void(yield aa(n,t));throw un()(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!rr(e))throw un()(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield aa(e,t)}}(e,sa)}function ca(e){const t=Qo(e);return Un((()=>async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ia(e),s=t(r,n);return await Hr(s)}))(e)}const la=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("cat",{signal:n.signal,searchParams:Rn({arg:t.toString(),...n}),headers:n.headers});yield*r.iterator()}()}catch(n){return Promise.reject(n)}})),ua=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await e.post("commands",{signal:t.signal,searchParams:Rn(t),headers:t.headers})).json()})),ha=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("dns",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers});return(await r.json()).Path})),da=Un((e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}})),fa=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r={arg:"".concat(t instanceof Uint8Array?et.decode(t):t),...n};r.compressionLevel&&(r["compression-level"]=r.compressionLevel,delete r.compressionLevel);const s=await e.post("get",{signal:n.signal,searchParams:Rn(r),headers:n.headers});yield*s.iterator()}()}catch(n){return Promise.reject(n)}})),pa=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("id",{signal:t.signal,searchParams:Rn({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),r={...is(await n.json())};return r.id=Xn(r.id),r.addresses&&(r.addresses=r.addresses.map((e=>(0,ht.HZ)(e)))),r})),ga=e=>{const t=pa(e);return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t(e);return Boolean(n&&n.addresses&&n.addresses.length)}},ya=Un(((e,t)=>function(n){try{let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const s="".concat(n instanceof Uint8Array?et.decode(n):n);async function o(e){let n=e.Hash;if(n.includes("/")){const e=n.startsWith("/ipfs/")?n:"/ipfs/".concat(n);n=(await ms(t)(e)).cid}else n=et.parse(n);const r={name:e.Name,path:s+(e.Name?"/".concat(e.Name):""),size:e.Size,cid:n,type:ma(e)};return e.Mode&&(r.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(r.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(r.mtime.nsecs=e.MtimeNsecs)),r}const a=await e.post("ls",{signal:r.signal,searchParams:Rn({arg:s,...r}),headers:r.headers});for await(let e of a.ndjson()){if(e=e.Objects,!e)throw new Error("expected .Objects in results");if(e=e[0],!e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(!t.length)return void(yield o(e));yield*t.map(o)}}()}catch(r){return Promise.reject(r)}}));function ma(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}const wa=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("dns",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return is(await n.json())})),ba=Un((e=>function(t){try{let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){const r=await e.post("ping",{signal:n.signal,searchParams:Rn({arg:"".concat(t),...n}),headers:n.headers,transform:is});yield*r.ndjson()}()}catch(n){return Promise.reject(n)}})),va=Un((e=>async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await e.post("resolve",{signal:n.signal,searchParams:Rn({arg:t,...n}),headers:n.headers}),{Path:s}=await r.json();return s})),Ea=Un((e=>async function(){throw un()(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),Pa=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("shutdown",{signal:t.signal,searchParams:Rn(t),headers:t.headers});await n.text()})),Sa=Un((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await e.post("version",{signal:t.signal,searchParams:Rn(t),headers:t.headers});return{...is(await n.json()),"ipfs-http-client":"1.0.0"}}));n(32638),n(38975);function Ta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={name:Q.name,code:Q.code,encode:e=>e,decode:e=>e},n=Object.values(ct);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((e=>n.push(e)));const r=new w({bases:n,loadBase:e.ipld&&e.ipld.loadBase}),s=Object.values(ut);[S,T,j,A,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>s.push(e)));const o=new v({codecs:s,loadCodec:e.ipld&&e.ipld.loadCodec}),a=Object.values(lt);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((e=>a.push(e)));const i=new P({hashers:a,loadHasher:e.ipld&&e.ipld.loadHasher});var c;return{add:ca(e),addAll:Qo(e),bitswap:(c=e,{wantlist:On(c),wantlistForPeer:_n(c),stat:Zn(c)}),block:Ar(e),bootstrap:Br(e),cat:la(e),commands:ua(e),config:Lr(e),dag:Kr(o,e),dht:es(e),diag:ss(e),dns:ha(e),files:bs(e),get:fa(e),getEndpointConfig:da(e),id:pa(e),isOnline:ga(e),key:xs(e),log:Us(e),ls:ya(e),mount:wa(e),name:Ls(e),object:Zs(o,e),pin:To(e),ping:ba(e),pubsub:Do(e),refs:zo(e),repo:Fo(e),resolve:va(e),start:Ea(e),stats:Wo(e),stop:Pa(e),swarm:Go(e),version:Sa(e),bases:r,codecs:o,hashers:i}}},72219:(e,t,n)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:n(17541).default,Headers:n(17541).Headers,Request:n(17541).Request,Response:n(17541).Response}},17541:(e,t,n)=>{"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response}}]);
//# sourceMappingURL=999.f83d6737.chunk.js.map