"use strict";(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[283],{23283:(e,r,t)=>{t.r(r),t.d(r,{code:()=>te,decode:()=>se,encode:()=>ae,name:()=>re,toGeneral:()=>ie});const n=function(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(255!==t[a])throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),h=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function u(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,o=0;e[r]===c;)n++,r++;for(var i=(e.length-r)*h+1>>>0,a=new Uint8Array(i);e[r];){var d=t[e.charCodeAt(r)];if(255===d)return;for(var u=0,f=i-1;(0!==d||u<o)&&-1!==f;f--,u++)d+=s*a[f]>>>0,a[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=u,r++}if(" "!==e[r]){for(var p=i-o;p!==i&&0===a[p];)p++;for(var l=new Uint8Array(n+(i-p)),y=n;p!==i;)l[y++]=a[p++];return l}}}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===r.length)return"";for(var t=0,n=0,o=0,i=r.length;o!==i&&0===r[o];)o++,t++;for(var a=(i-o)*d+1>>>0,h=new Uint8Array(a);o!==i;){for(var u=r[o],f=0,p=a-1;(0!==u||f<n)&&-1!==p;p--,f++)u+=256*h[p]>>>0,h[p]=u%s>>>0,u=u/s>>>0;if(0!==u)throw new Error("Non-zero carry");n=f,o++}for(var l=a-n;l!==a&&0===h[l];)l++;for(var y=c.repeat(t);l<a;++l)y+=e.charAt(h[l]);return y},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error(`Non-${r} character`)}}},o=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class i{constructor(e,r,t){this.name=e,this.prefix=r,this.baseEncode=t}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a{constructor(e,r,t){if(this.name=e,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=t}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return c(this,e)}}class s{constructor(e){this.decoders=e}or(e){return c(this,e)}decode(e){const r=e[0],t=this.decoders[r];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const c=(e,r)=>new s({...e.decoders||{[e.prefix]:e},...r.decoders||{[r.prefix]:r}});class h{constructor(e,r,t,n){this.name=e,this.prefix=r,this.baseEncode=t,this.baseDecode=n,this.encoder=new i(e,r,t),this.decoder=new a(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const d=({name:e,prefix:r,encode:t,decode:n})=>new h(e,r,t,n),u=({prefix:e,name:r,alphabet:t})=>{const{encode:i,decode:a}=n(t,r);return d({prefix:e,name:r,encode:i,decode:e=>o(a(e))})},f=({name:e,prefix:r,bitsPerChar:t,alphabet:n})=>d({prefix:r,name:e,encode:e=>((e,r,t)=>{const n="="===r[r.length-1],o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i})(e,n,t),decode:r=>((e,r,t,n)=>{const o={};for(let d=0;d<r.length;++d)o[r[d]]=d;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,h=0;for(let d=0;d<i;++d){const r=o[e[d]];if(void 0===r)throw new SyntaxError(`Non-${n} character`);c=c<<t|r,s+=t,s>=8&&(s-=8,a[h++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a})(r,n,t,e)}),p=(f({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),f({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),f({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}));f({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function l(e){return p.encode(e).slice(1)}function y(e){return p.decode(`u${e}`)}var b=function e(r,t,n){t=t||[];var o=n=n||0;for(;r>=v;)t[n++]=255&r|w,r/=128;for(;r&g;)t[n++]=255&r|w,r>>>=7;return t[n]=0|r,e.bytes=n-o+1,t},w=128,g=-128,v=Math.pow(2,31);var m=function e(r,t){var n,o=0,i=0,a=t=t||0,s=r.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=r[a++],o+=i<28?(n&A)<<i:(n&A)*Math.pow(2,i),i+=7}while(n>=x);return e.bytes=a-t,o},x=128,A=127;var E=Math.pow(2,7),C=Math.pow(2,14),U=Math.pow(2,21),S=Math.pow(2,28),D=Math.pow(2,35),k=Math.pow(2,42),I=Math.pow(2,49),P=Math.pow(2,56),M=Math.pow(2,63);const z={encode:b,decode:m,encodingLength:function(e){return e<E?1:e<C?2:e<U?3:e<S?4:e<D?5:e<k?6:e<I?7:e<P?8:e<M?9:10}},V=(e,r=0)=>[z.decode(e,r),z.decode.bytes],L=(e,r,t=0)=>(z.encode(e,r,t),r),N=e=>z.encodingLength(e);class O{constructor(e,r,t,n){this.code=e,this.size=r,this.digest=t,this.bytes=n}}const j=u({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),J=(u({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),f({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),T=(f({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),f({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),f({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),f({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),(e,r)=>{const{bytes:t,version:n}=e;return 0===n?R(t,B(e),r||j.encoder):F(t,B(e),r||J.encoder)}),$=new WeakMap,B=e=>{const r=$.get(e);if(null==r){const r=new Map;return $.set(e,r),r}return r};class q{constructor(e,r,t,n){this.code=r,this.version=e,this.multihash=t,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Q)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==_)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return q.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,t=((e,r)=>{const t=r.byteLength,n=N(e),o=n+N(t),i=new Uint8Array(o+t);return L(e,i,0),L(t,i,n),i.set(r,o),new O(e,t,r,i)})(e,r);return q.createV1(this.code,t)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return q.equals(this,e)}static equals(e,r){const t=r;return t&&e.code===t.code&&e.version===t.version&&((e,r)=>{if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&((e,r)=>{if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0})(e.bytes,t.bytes)}})(e.multihash,t.multihash)}toString(e){return T(this,e)}toJSON(){return{"/":T(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const r=e;if(r instanceof q)return r;if(null!=r["/"]&&r["/"]===r.bytes||r.asCID===r){const{version:e,code:t,multihash:n,bytes:o}=r;return new q(e,t,n,o||H(e,t,n.bytes))}if(!0===r[K]){const{version:e,multihash:t,code:n}=r,i=(e=>{const r=o(e),[t,n]=V(r),[i,a]=V(r.subarray(n)),s=r.subarray(n+a);if(s.byteLength!==i)throw new Error("Incorrect length");return new O(t,i,s,r)})(t);return q.create(e,n,i)}return null}static create(e,r,t){if("number"!==typeof r)throw new Error("String codecs are no longer supported");if(!(t.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(r!==Q)throw new Error(`Version 0 CID must use dag-pb (code: ${Q}) block encoding`);return new q(e,r,t,t.bytes);case 1:{const n=H(e,r,t.bytes);return new q(e,r,t,n)}default:throw new Error("Invalid version")}}static createV0(e){return q.create(0,Q,e)}static createV1(e,r){return q.create(1,e,r)}static decode(e){const[r,t]=q.decodeFirst(e);if(t.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=q.inspectBytes(e),t=r.size-r.multihashSize,n=o(e.subarray(t,t+r.multihashSize));if(n.byteLength!==r.multihashSize)throw new Error("Incorrect length");const i=n.subarray(r.multihashSize-r.digestSize),a=new O(r.multihashCode,r.digestSize,i,n);return[0===r.version?q.createV0(a):q.createV1(r.codec,a),e.subarray(r.size)]}static inspectBytes(e){let r=0;const t=()=>{const[t,n]=V(e.subarray(r));return r+=n,t};let n=t(),o=Q;if(18===n?(n=0,r=0):o=t(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const i=r,a=t(),s=t(),c=r+s;return{version:n,codec:o,multihashCode:a,digestSize:s,multihashSize:c-i,size:c}}static parse(e,r){const[t,n]=G(e,r),o=q.decode(n);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return B(o).set(t,e),o}}const G=(e,r)=>{switch(e[0]){case"Q":{const t=r||j;return[j.prefix,t.decode(`${j.prefix}${e}`)]}case j.prefix:{const t=r||j;return[j.prefix,t.decode(e)]}case J.prefix:{const t=r||J;return[J.prefix,t.decode(e)]}default:if(null==r)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}},R=(e,r,t)=>{const{prefix:n}=t;if(n!==j.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(null==o){const o=t.encode(e).slice(1);return r.set(n,o),o}return o},F=(e,r,t)=>{const{prefix:n}=t,o=r.get(n);if(null==o){const o=t.encode(e);return r.set(n,o),o}return o},Q=112,_=18,H=(e,r,t)=>{const n=N(e),o=n+N(r),i=new Uint8Array(o+t.byteLength);return L(e,i,0),L(r,i,n),i.set(t,o),i},K=Symbol.for("@ipld/js-cid/CID");function W(e){const r={signature:y(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=y(e.protected)),r}function Z(e){const r={signature:l(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=l(e.protected)),r}function X(e){const r={};return e.encrypted_key&&(r.encrypted_key=y(e.encrypted_key)),e.header&&(r.header=e.header),r}function Y(e){const r={};return e.encrypted_key&&(r.encrypted_key=l(e.encrypted_key)),e.header&&(r.header=e.header),r}var ee=t(73910);const re="dag-jose",te=133;function ne(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function oe(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function ie(e){if("string"===typeof e){const r=e.split(".");if(3===r.length)return function(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:q.decode(y(t))}}(r);if(5===r.length)return function(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}(r);throw new Error("Not a valid JOSE string")}if(ne(e)||oe(e))return e;throw new Error("Not a valid unencoded JOSE object")}function ae(e){let r;if("string"===typeof e&&(e=ie(e)),ne(e))r=function(e){const r=y(e.payload);try{q.decode(r)}catch(t){throw new Error("Not a valid DagJWS")}return{payload:r,signatures:e.signatures.map(W)}}(e);else{if(!oe(e))throw new Error("Not a valid JOSE object");r=function(e){const r={ciphertext:y(e.ciphertext),protected:y(e.protected),iv:y(e.iv),tag:y(e.tag)};return e.aad&&(r.aad=y(e.aad)),e.recipients&&(r.recipients=e.recipients.map(X)),e.unprotected&&(r.unprotected=e.unprotected),r}(e)}return new Uint8Array(ee.encode(r))}function se(e){let r;try{r=ee.decode(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(t=r)&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures))return function(e){const r={payload:l(e.payload),signatures:e.signatures.map(Z)};return r.link=q.decode(new Uint8Array(e.payload)),r}(r);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(r))return function(e){const r={ciphertext:l(e.ciphertext),protected:l(e.protected),iv:l(e.iv),tag:l(e.tag)};return e.aad&&(r.aad=l(e.aad)),e.recipients&&(r.recipients=e.recipients.map(Y)),e.unprotected&&(r.unprotected=e.unprotected),r}(r);throw new Error("Not a valid DAG-JOSE object");var t}}}]);
//# sourceMappingURL=283.4d311dd3.chunk.js.map